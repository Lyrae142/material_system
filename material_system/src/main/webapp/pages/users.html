<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>物资管理系统</title>
    <meta name="description" content="物资管理系统">
    <meta name="keywords" content="物资管理系统">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
    <link rel="stylesheet" href="/material_system/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/material_system/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/material_system/plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="/material_system/plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="/material_system/plugins/morris/morris.css">
    <link rel="stylesheet" href="/material_system/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="/material_system/plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="/material_system/plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="/material_system/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="/material_system/plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="/material_system/plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="/material_system/plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="/material_system/plugins/select2/select2.css">
    <link rel="stylesheet" href="/material_system/plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="/material_system/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="/material_system/plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="/material_system/plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="/material_system/css/style.css">
    <link rel="stylesheet" href="/material_system/plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="/material_system/plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="/material_system/plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="/material_system/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
</head>

<body class="hold-transition skin-black-light sidebar-mini">

    <div id="user" class="wrapper">
			<!-- 页面头部 -->
			<header class="main-header">


				<!-- Logo -->
				<a href="/material_system/index" class="logo">
					<!-- mini logo for sidebar mini 50x50 pixels -->
					<span class="logo-mini"><b>物资</b></span>
					<!-- logo for regular state and mobile devices -->
					<span class="logo-lg"><b>物资</b>管理系统</span>
				</a>


				<!-- Header Navbar: style can be found in header.less -->
				<nav class="navbar navbar-static-top">
					<!-- Sidebar toggle button-->
					<a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
				<span class="sr-only">Toggle navigation</span>
			</a>

					<div class="navbar-custom-menu">
						<ul class="nav navbar-nav">
							<!-- User Account: style can be found in dropdown.less -->
							<li class="dropdown user user-menu">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<img src="/material_system/img/Lyrae.jpg" class="user-image" alt="User Image">
							<span class="hidden-xs">{{currentUsername}}</span>
						</a>
								<ul class="dropdown-menu">
									<!-- User image -->
									<li class="user-header">
										<img src="/material_system/img/Lyrae.jpg" class="img-circle" alt="User Image">

										<p>
											{{currentUsername}}
											<small>最后登录 2:20PM</small>
										</p>
									</li>
									<!-- Menu Footer-->
									<li class="user-footer">
										<div class="pull-right">
											<a href="/material_system/user/logout" class="btn btn-default btn-flat">注销</a>
										</div>
									</li>
								</ul>
							</li>

						</ul>
					</div>
				</nav>
			</header>
			<!-- 页面头部 /-->

			<!-- 导航侧栏 -->
			<aside class="main-sidebar">
				<!-- sidebar: style can be found in sidebar.less -->
				<section class="sidebar">
					<!-- Sidebar user panel -->
					<div class="user-panel">
						<div class="pull-left image">
							<img src="/material_system/img/Lyrae.jpg" class="img-circle" alt="User Image">
						</div>
						<div class="pull-left info">
							<p>{{currentUsername}}</p>
							<a href="#"><i class="fa fa-circle text-success"></i> 在线</a>
						</div>
					</div>

					<ul class="sidebar-menu">
						<li class="header">菜单</li>

						<li id="admin-index"><a href="/material_system/index"><i class="fa fa-dashboard"></i> <span>首页</span></a></li>

						<!-- 菜单 -->



						<li class="treeview">
							<a href="#">
						<i class="fa fa-folder"></i> <span>商品与订单管理</span>
						<span class="pull-right-container">
							<i class="fa fa-angle-left pull-right"></i>
						</span>
					</a>
							<ul class="treeview-menu">

								<li id="product-manage">
									<a href="/material_system/product">
										<i class="fa fa-circle-o"></i> 产品管理
									</a>
								</li>

								<li id="order-manage">
									<a href="/material_system/order">
										<i class="fa fa-circle-o"></i> 订单管理
									</a>
								</li>

								<li id="stock-manage">
									<a href="/material_system/stock">
										<i class="fa fa-circle-o"></i> 仓库管理
									</a>
								</li>
							</ul>
						</li>
						<li class="treeview">
							<a href="#">
						<i class="fa fa-user-secret"></i> <span>用户权限管理</span>
						<span class="pull-right-container">
							<i class="fa fa-angle-left pull-right"></i>
						</span>
					</a>
							<ul class="treeview-menu">

								<li id="user-manage">
									<a href="/material_system/user">
										<i class="fa fa-circle-o"></i> 用户管理
									</a>
								</li>

								<li id="charts-morris">
									<a href="/material_system/role">
										<i class="fa fa-circle-o"></i> 角色管理
									</a>
								</li>

								<li id="charts-flot">
									<a href="/material_system/permission">
										<i class="fa fa-circle-o"></i> 资源权限管理
									</a>
								</li>

							</ul>
						</li>

						<li class="treeview">
								<a href="#">
							<i class="fa fa-gears"></i> <span>系统管理</span>
							<span class="pull-right-container">
								<i class="fa fa-angle-left pull-right"></i>
							</span>
						</a>
								<ul class="treeview-menu">

									<li id="log-manage">
										<a href="/material_system/systemLog">
											<i class="fa fa-circle-o"></i> 日志管理
										</a>
									</li>

								</ul>
							</li>

					</ul>
				</section>
				<!-- /.sidebar -->
			</aside>
			<!-- 导航侧栏 /-->
		<!-- 内容区域 -->
		<!-- @@master = admin-layout.html-->
		<!-- @@block = content -->
		
		<div class="content-wrapper">
		
					<!-- 内容头部 -->
					<section class="content-header">
						<h1>
							用户权限管理 <small>用户管理</small>
						</h1>
						<ol class="breadcrumb">
							<li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
							<li><a href="#">用户权限管理</a></li>
							<li class="active">用户管理</li>
						</ol>
					</section>
					<!-- 内容头部 /-->
		
					<!-- 正文区域 -->
					<section class="content">

						<!-- .box-body -->
						<div class="box box-info">
							<div class="box-header with-border">
								<h3 class="box-title">用户列表</h3>
							</div>

							<div class="box-body">

								<!-- 数据表格 -->
								<div class="table-box">

									<!--工具栏-->
									<div class="pull-left">
										<div class="form-group form-inline">
											<div class="btn-group">
												<button type="button" class="btn btn-default" title="新建" data-toggle="modal" data-target="#add-user">
													<i class="fa fa-file-o"></i> 新建
												</button>

												<button type="button" class="btn btn-default" title="刷新">
													<i class="fa fa-refresh"></i> 刷新
												</button>
											</div>
										</div>
									</div>
									<div class="box-tools pull-right">
										<div class="has-feedback">
											<input type="text" class="form-control input-sm"
												   placeholder="输入用户名查询" v-model="searchName" @keyup="search"> <span
												class="glyphicon glyphicon-search form-control-feedback"></span>
										</div>
									</div>
									<!--工具栏/-->

									<!--数据列表-->
									<table id="dataList"
										   class="table table-bordered table-striped table-hover dataTable">
										<thead>
										<tr>
											<th class="" style="padding-right: 0px"><input
													id="selall" type="checkbox" class="icheckbox_square-blue">
											</th>
											<th class="text-center sorting_asc">ID</th>
											<th class="text-center sorting_desc">用户名</th>
											<th class="sorting_asc text-center sorting_asc_disabled">邮箱</th>
											<th class="sorting_desc text-center sorting_desc_disabled">联系电话</th>
											<th class="sorting text-center">状态</th>
											<th class="text-center">操作</th>
										</tr>
										</thead>
										<tbody>

											<tr v-for="user in userList">
												<td><input type="checkbox"></td>
												<td class="text-center">{{user.id}}</td>
												<td class="text-center">{{user.username}}</td>
												<td class="text-center">{{user.email}}</td>
												<td class="text-center">{{user.phoneNum}}</td>
												<td class="text-center">{{user.statusStr}}</td>
												<td class="text-center">
													<a  class="btn bg-olive btn-xs" @click="authentic(user.id)">授权</a>
													<a  class="btn bg-olive btn-xs" data-toggle="modal" data-target="#user-detail" @click="getDetail(user.id)">权限详情</a>
													<a  class="btn bg-olive btn-xs" data-toggle="modal" data-target="#add-roles" @click="loadRolesById(user.id)">添加角色</a>
													<a  class="btn bg-maroon btn-xs" @click="shutdown(user.id)">关闭</a>
												</td>
											</tr>
										</tbody>
									</table>
									<!--数据列表/-->

								</div>
								<!-- 数据表格 /-->

							</div>
							<!-- /.box-body -->

							<!-- .box-footer-->
							<!--<div class="box-footer">
								<div class="pull-left">
									<div class="form-group form-inline">
										总共{{pageInfo.pages}} 页，共{{pageInfo.total}} 条数据。 每页
										<select class="form-control" v-model="pageInfo.pageSize" @change="findAll(pageInfo.pageNum,pageInfo.pageSize)">
											<option value="5">5</option>
											<option value="10">10</option>
											<option value="15">15</option>
											<option value="20">20</option>
										</select> 条
									</div>
								</div>

								<div class="box-tools pull-right">
									<ul class="pagination">
										<li><a @click="findAll(1,pageInfo.pageSize)" aria-label="Previous">首页</a></li>
										<li><a @click="findAll(pageInfo.pageNum-1,pageInfo.pageSize)">上一页</a></li>
										<li v-for="i in pageInfo.navigatepageNums">
											<a @click="findAll(i,pageInfo.pageSize)">{{i}}</a>
										</li>
										<li><a @click="findAll(pageInfo.pageNum+1,pageInfo.pageSize)">下一页</a></li>
										<li><a @click="findAll(pageInfo.pages,pageInfo.pageSize)" aria-label="Next">尾页</a></li>
									</ul>
								</div>

							</div>-->
							<!-- /.box-footer-->



						</div>
						<!--模态窗口-->
						<div id="add-user" class="modal" role="dialog">
							<div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title">添加用户</h4>
									</div>
									<div class="modal-body">
										<div class="box-body">
											<!--label显示的内容-->
											<div class="panel panel-default">
												<div class="panel-heading">用户信息</div>
												<div class="row data-type">

													<div class="col-md-2 title">用户名称</div>
													<div class="col-md-4 data">
														<input type="text" class="form-control" v-model="newUserInfo.username"
															   placeholder="用户名称" value="">
													</div>
													<div class="col-md-2 title">密码</div>
													<div class="col-md-4 data">
														<input type="password" class="form-control" v-model="newUserInfo.password"
															   placeholder="密码" value="">
													</div>
													<div class="col-md-2 title">邮箱</div>
													<div class="col-md-4 data">
														<input type="text" class="form-control" v-model="newUserInfo.email"
															   placeholder="邮箱" value="">
													</div>
													<div class="col-md-2 title">联系电话</div>
													<div class="col-md-4 data">
														<input type="text" class="form-control" v-model="newUserInfo.phoneNum"
															   placeholder="联系电话" value="">
													</div>
													<div class="col-md-2 title">用户状态</div>
													<div class="col-md-4 data">
														<select class="form-control" style="width: 100%"
																v-model="newUserInfo.status">
															<option value="0" selected="selected">关闭</option>
															<option value="1">授权</option>
														</select>
													</div>

												</div>
											</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-lighter" data-dismiss="modal">关闭</button>
										<button type="button" class="btn btn-lighter" data-dismiss="modal" @click="addUser">保存</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>

							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->
						<!--模态窗口-->
						<div id="user-detail" class="modal" role="dialog">
							<div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title">用户权限</h4>
									</div>
									<div class="modal-body">
										<div class="box-body">
											<!--label显示的内容-->
											<!--数据列表-->
											<div class="tab-pane" id="tab-treetable">
												<table id="collapse-table"
													   class="table table-bordered table-hover dataTable">
													<thead>
													<tr>
														<th>权限名称</th>
														<th>URL(访问路径)</th>
													</tr>
													</thead>

													<tr data-tt-id="0">
														<td class="text-yellow" colspan="2"><dt>{{userInfo.username}}</dt></td>
													</tr>

													<tbody v-for="(role,rIndex) in userInfo.roles">
														<tr :data-tt-id="rIndex+1"  :data-tt-parent-id="0">
															<td class="text-green"><dt>{{role.roleName}}</dt></td>
															<td class="text-green"><dt>{{role.roleDesc}}</dt></td>
														</tr>
														<tr v-for="(permission,pIndex) in role.permissions" :data-tt-id="rIndex+'-'+pIndex"  :data-tt-parent-id="rIndex+1">
															<td class="text-aqua">{{permission.permissionName}}</td>
															<td class="text-aqua">{{permission.url}}</td>
														</tr>
													</tbody>
												</table>
											</div>
											<!--数据列表/-->
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-lighter" data-dismiss="modal">确认</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>

							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->

						<!--模态窗口-->
						<div id="add-roles" class="modal" role="dialog">
							<div class="modal-dialog modal-lg">
								<div class="modal-content">
									<div class="modal-header">
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
										<h4 class="modal-title">添加用户角色</h4>
									</div>
									<div class="modal-body">
										<div class="box-body">
											<!--label显示的内容-->
											<!--数据列表-->
											<table id="roleList"
												   class="table table-bordered table-striped table-hover dataTable">
												<thead>
												<tr>
													<th class="" style="padding-right: 0px"><input
															id="roleAll" type="checkbox" class="icheckbox_square-blue">
													</th>
													<th class="text-center sorting_desc">角色名称</th>
													<th class="sorting_asc text-center sorting_asc_disabled">描述</th>
												</tr>
												</thead>
												<tbody>

												<tr v-for="role in roleList">
													<td><input name="ids" :value="role.id" type="checkbox"></td>
													<td class="text-center">{{role.roleName}}</td>
													<td class="text-center">{{role.roleDesc}}</td>
												</tr>
												</tbody>
											</table>
											<!--数据列表/-->
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-lighter" data-dismiss="modal">取消</button>
										<button type="button" class="btn btn-lighter" data-dismiss="modal" @click="addRoles">保存</button>
									</div>
								</div>
								<!-- /.modal-content -->
							</div>

							<!-- /.modal-dialog -->
						</div>
						<!-- /.modal -->
					</section>
					<!-- 正文区域 /-->
		
				</div>
		<!-- @@close -->
		<!-- 内容区域 /-->
		

        <!-- 底部导航 -->
        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 1.4.2
            </div>
            <strong>Copyright &copy; 2022-2023 .</strong> All rights reserved.
        </footer>
        <!-- 底部导航 /-->

    </div>


    <script src="/material_system/plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="/material_system/plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="/material_system/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="/material_system/plugins/raphael/raphael-min.js"></script>
    <script src="/material_system/plugins/morris/morris.min.js"></script>
    <script src="/material_system/plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="/material_system/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="/material_system/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="/material_system/plugins/knob/jquery.knob.js"></script>
    <script src="/material_system/plugins/daterangepicker/moment.min.js"></script>
    <script src="/material_system/plugins/daterangepicker/daterangepicker.js"></script>
    <script src="/material_system/plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="/material_system/plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="/material_system/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="/material_system/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="/material_system/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="/material_system/plugins/fastclick/fastclick.js"></script>
    <script src="/material_system/plugins/iCheck/icheck.min.js"></script>
    <script src="/material_system/plugins/adminLTE/js/app.min.js"></script>
    <script src="/material_system/plugins/treeTable/jquery.treetable.js"></script>
    <script src="/material_system/plugins/select2/select2.full.min.js"></script>
    <script src="/material_system/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="/material_system/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="/material_system/plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="/material_system/plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="/material_system/plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="/material_system/plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="/material_system/plugins/ckeditor/ckeditor.js"></script>
    <script src="/material_system/plugins/input-mask/jquery.inputmask.js"></script>
    <script src="/material_system/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="/material_system/plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="/material_system/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="/material_system/plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="/material_system/plugins/chartjs/Chart.min.js"></script>
    <script src="/material_system/plugins/flot/jquery.flot.min.js"></script>
    <script src="/material_system/plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="/material_system/plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="/material_system/plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="/material_system/plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="/material_system/plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="/material_system/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="/material_system/plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="/material_system/js/vuejs-2.5.16.js"></script>
    <script src="/material_system/js/axios-0.18.0.js"></script>
	<script src="/material_system/js/users.js"></script>
	<script src="/material_system/layer/layer.js"></script>
</body>

</html>
<!---->